========================================
ğŸš¨ ç«‹å³ä¿®å¤AIé…ç½®é—®é¢˜
========================================

æ ¹æ®æ‚¨çš„æˆªå›¾ï¼Œæ‚¨å·²ç»é…ç½®äº†APIï¼Œä½†æ¸¸æˆä»ç„¶æ‰¾ä¸åˆ°é…ç½®ã€‚
è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

ã€æ­¥éª¤1ã€‘åˆ·æ–°æ¸¸æˆé¡µé¢ï¼ˆF5ï¼‰

ã€æ­¥éª¤2ã€‘æ‰“å¼€æ§åˆ¶å°ï¼ˆF12ï¼‰ï¼Œå¤åˆ¶ç²˜è´´ä»¥ä¸‹æ‰€æœ‰ä»£ç å¹¶å›è½¦ï¼š

// ===== å¤åˆ¶ä»è¿™é‡Œå¼€å§‹ =====

// è¯»å–æ‚¨ä¹‹å‰ä¿å­˜çš„é…ç½®
const savedConfig = JSON.parse(localStorage.getItem('ai_config'));
console.log('æ‰¾åˆ°é…ç½®:', savedConfig);

// å¼ºåˆ¶åº”ç”¨åˆ°AIConfig
if (AIConfig && AIConfig.api) {
    AIConfig.api.openai_proxy = {
        enabled: true,
        apiKey: savedConfig.apiKey,
        baseURL: savedConfig.baseUrl || savedConfig.baseURL,
        model: savedConfig.model || 'gpt-3.5-turbo'
    };
    AIConfig.currentProvider = 'openai_proxy';
    console.log('âœ… Step 1: AIConfigå·²æ›´æ–°');
}

// å¼ºåˆ¶åº”ç”¨åˆ°AIServices
if (AIServices) {
    AIServices.openai_proxy = {
        name: 'OpenAIå…¼å®¹ä»£ç†',
        baseURL: savedConfig.baseUrl || savedConfig.baseURL,
        headers: {
            'Content-Type': 'application/json',
            'Authorization': 'Bearer ' + savedConfig.apiKey
        },
        apiKey: savedConfig.apiKey,
        enabled: true
    };
    console.log('âœ… Step 2: AIServiceså·²æ›´æ–°');
}

// åŒæ­¥é…ç½®
if (typeof syncAIServiceConfig === 'function') {
    syncAIServiceConfig();
    console.log('âœ… Step 3: é…ç½®å·²åŒæ­¥');
}

// ä¿®å¤éªŒè¯å‡½æ•°
if (aiConversation) {
    aiConversation.validateAPIConfig = function() { return true; };
    console.log('âœ… Step 4: éªŒè¯å‡½æ•°å·²ä¿®å¤');
}

console.log('ğŸ‰ ä¿®å¤å®Œæˆï¼ç°åœ¨è¯•è¯•ä¸NPCå¯¹è¯å§ï¼');

// ===== å¤åˆ¶åˆ°è¿™é‡Œç»“æŸ =====

ã€æ­¥éª¤3ã€‘å†æ¬¡å°è¯•ä¸NPCå¯¹è¯

========================================
å¦‚æœè¿˜æ˜¯ä¸è¡Œï¼Œè¯·è¿è¡Œè¿™ä¸ªæµ‹è¯•å‘½ä»¤ï¼š
========================================

testAIConfig()

è¿™ä¼šç›´æ¥æµ‹è¯•æ‚¨çš„APIæ˜¯å¦å¯ç”¨ã€‚

========================================
å¤‡ç”¨æ–¹æ¡ˆï¼šæ‰‹åŠ¨è®¾ç½®é…ç½®
========================================

å¦‚æœä¸Šé¢çš„æ–¹æ³•ä¸è¡Œï¼Œç›´æ¥è¿è¡Œï¼š

AIConfig.api.openai_proxy = {
    enabled: true,
    apiKey: 'æ‚¨çš„APIå¯†é’¥',
    baseURL: 'æ‚¨çš„ä»£ç†åœ°å€',
    model: 'gpt-3.5-turbo'
};
AIConfig.currentProvider = 'openai_proxy';

ï¼ˆè¯·æ›¿æ¢ä¸ºæ‚¨çš„å®é™…APIå¯†é’¥å’Œåœ°å€ï¼‰

========================================