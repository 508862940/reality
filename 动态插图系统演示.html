<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>动态插图系统 - 根据选项显示不同插图</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, "PingFang SC", "Microsoft YaHei", sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            width: 100%;
        }

        h1 {
            color: white;
            text-align: center;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
        }

        .demo-box {
            background: #1a1a2e;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .scene-title {
            color: #f093fb;
            font-size: 16px;
            margin-bottom: 15px;
            font-weight: bold;
        }

        /* F1区样式 */
        .f1-area {
            background: #0f0f23;
            border-radius: 8px;
            padding: 15px;
            color: #e4e4e7;
            height: 350px;
            overflow-y: auto;
            position: relative;
        }

        /* 自定义滚动条 */
        .f1-area::-webkit-scrollbar {
            width: 6px;
        }

        .f1-area::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }

        .f1-area::-webkit-scrollbar-thumb {
            background: rgba(139, 92, 246, 0.4);
            border-radius: 3px;
        }

        .location-tag {
            color: #8b92f6;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .story-text {
            line-height: 1.6;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .story-text p {
            margin-bottom: 8px;
        }

        /* 选项样式 */
        .choice-item {
            display: block;
            color: #a5b4fc;
            padding: 10px 15px;
            margin: 8px 0;
            background: rgba(139, 92, 246, 0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            position: relative;
            font-size: 14px;
        }

        .choice-item:hover {
            background: rgba(139, 92, 246, 0.15);
            transform: translateX(3px);
        }

        .choice-item.selected {
            background: rgba(139, 92, 246, 0.25);
            border-color: rgba(139, 92, 246, 0.5);
            transform: translateX(5px);
        }

        .choice-item.selected::after {
            content: '✓';
            position: absolute;
            right: 15px;
            color: #8b92f6;
        }

        /* 插图显示区 */
        .illustration-area {
            margin-top: 30px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(240, 147, 251, 0.1));
            border-radius: 10px;
            text-align: center;
            display: none;
            animation: slideIn 0.3s ease;
            border: 1px dashed rgba(139, 92, 246, 0.3);
        }

        .illustration-area.show {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .illustration-icon {
            font-size: 64px;
            margin-bottom: 15px;
            filter: drop-shadow(0 4px 6px rgba(139, 92, 246, 0.3));
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .illustration-caption {
            color: #e4e4e7;
            font-size: 14px;
            font-style: italic;
            margin-bottom: 10px;
        }

        .illustration-desc {
            color: #94a3b8;
            font-size: 12px;
            line-height: 1.5;
        }

        /* F2区控制栏 */
        .f2-area {
            margin-top: 15px;
            padding: 12px;
            background: rgba(30, 30, 45, 0.95);
            border-radius: 8px;
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .control-btn {
            padding: 8px 16px;
            border-radius: 20px;
            background: rgba(139, 92, 246, 0.2);
            border: 1px solid rgba(139, 92, 246, 0.3);
            color: #e4e4e7;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .control-btn:hover {
            background: rgba(139, 92, 246, 0.3);
            transform: translateY(-1px);
        }

        .control-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        /* 放大镜按钮 */
        .zoom-btn {
            padding: 8px 12px;
            font-size: 16px;
            background: rgba(240, 147, 251, 0.2);
            border-color: rgba(240, 147, 251, 0.3);
            position: relative;
        }

        .zoom-btn:hover {
            background: rgba(240, 147, 251, 0.3);
        }

        .zoom-btn.active {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
        }

        /* 动态提示 */
        .zoom-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(30, 30, 45, 0.95);
            color: #f093fb;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 11px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            margin-bottom: 5px;
        }

        .zoom-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 5px solid transparent;
            border-top-color: rgba(30, 30, 45, 0.95);
        }

        .zoom-btn:hover .zoom-tooltip {
            opacity: 1;
        }

        /* 插图指示器 */
        .has-illustration {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #f093fb;
            border-radius: 50%;
            margin-left: 5px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.6;
                transform: scale(1.3);
            }
        }

        /* 状态提示 */
        .status-tip {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid rgba(255, 193, 7, 0.3);
            color: #fbbf24;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            margin-bottom: 15px;
            text-align: center;
        }

        /* 特殊效果 */
        .special-effect {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: bold;
            animation: sparkle 2s infinite;
        }

        @keyframes sparkle {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; transform: scale(0.95); }
        }

        /* 组合插图特殊样式 */
        .combo-illustration {
            display: flex;
            gap: 10px;
            justify-content: center;
            align-items: center;
        }

        .combo-illustration .illustration-icon {
            font-size: 48px;
        }

        /* 隐藏彩蛋 */
        .easter-egg {
            background: linear-gradient(45deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3);
            background-size: 400% 400%;
            animation: gradient 3s ease infinite;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎨 动态插图系统演示 - 选什么显示什么！</h1>

        <div class="demo-grid">
            <!-- 场景1：图书馆选书 -->
            <div class="demo-box">
                <div class="scene-title">场景1：图书馆选书 📚</div>
                <div class="status-tip">💡 选择不同的选项，放大镜会显示对应的图片</div>

                <div class="f1-area">
                    <div class="location-tag">📍 图书馆·文学区</div>
                    <div class="story-text">
                        <p>安静的图书馆里，书架上摆满了各种书籍。</p>
                        <p>你想找本书来打发时间...</p>
                    </div>

                    <div class="choice-item" onclick="selectBook(this, 'novel')">
                        → 找一本轻小说
                    </div>
                    <div class="choice-item" onclick="selectBook(this, 'textbook')">
                        → 查找学习资料
                    </div>
                    <div class="choice-item" onclick="selectBook(this, 'magazine')">
                        → 翻翻时尚杂志
                    </div>
                    <div class="choice-item" onclick="selectBook(this, 'manga')">
                        → 看看漫画书
                    </div>

                    <!-- 动态插图区 -->
                    <div class="illustration-area" id="bookIllustration">
                        <div class="illustration-icon" id="bookIcon">📖</div>
                        <div class="illustration-caption" id="bookCaption">轻小说</div>
                        <div class="illustration-desc" id="bookDesc">描述</div>
                    </div>
                </div>

                <div class="f2-area">
                    <button class="control-btn" onclick="proceedBook()">▶️ 继续</button>
                    <button class="control-btn" onclick="resetScene('book')">↩️ 重置</button>
                    <button class="control-btn zoom-btn" onclick="toggleBookIllustration()">
                        🔍
                        <span class="has-illustration" id="bookIndicator" style="display: none;"></span>
                        <span class="zoom-tooltip" id="bookTooltip">查看图片</span>
                    </button>
                </div>
            </div>

            <!-- 场景2：换装系统 -->
            <div class="demo-box">
                <div class="scene-title">场景2：更衣室换装 👔</div>
                <div class="status-tip">💡 选择多个装备，查看组合效果</div>

                <div class="f1-area">
                    <div class="location-tag">📍 更衣室</div>
                    <div class="story-text">
                        <p>准备参加学校活动，你需要选择合适的装扮...</p>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <div style="color: #94a3b8; font-size: 12px; margin-bottom: 8px;">服装（单选）</div>
                        <div class="choice-item" onclick="selectOutfit(this, 'uniform')">
                            → 校服
                        </div>
                        <div class="choice-item" onclick="selectOutfit(this, 'casual')">
                            → 休闲装
                        </div>
                        <div class="choice-item" onclick="selectOutfit(this, 'formal')">
                            → 正装
                        </div>
                    </div>

                    <div>
                        <div style="color: #94a3b8; font-size: 12px; margin-bottom: 8px;">配饰（多选）</div>
                        <div class="choice-item" onclick="toggleAccessory(this, 'watch')">
                            → 手表
                        </div>
                        <div class="choice-item" onclick="toggleAccessory(this, 'necklace')">
                            → 项链
                        </div>
                        <div class="choice-item" onclick="toggleAccessory(this, 'hat')">
                            → 帽子
                        </div>
                    </div>

                    <!-- 组合插图区 -->
                    <div class="illustration-area" id="outfitIllustration">
                        <div class="combo-illustration" id="outfitCombo">
                            <div class="illustration-icon">👔</div>
                        </div>
                        <div class="illustration-caption" id="outfitCaption">你的装扮</div>
                        <div class="illustration-desc" id="outfitDesc">选择服装和配饰查看效果</div>
                    </div>
                </div>

                <div class="f2-area">
                    <button class="control-btn" onclick="proceedOutfit()">▶️ 继续</button>
                    <button class="control-btn" onclick="resetScene('outfit')">↩️ 重置</button>
                    <button class="control-btn zoom-btn" onclick="toggleOutfitIllustration()">
                        🔍
                        <span class="has-illustration" id="outfitIndicator" style="display: none;"></span>
                        <span class="zoom-tooltip">查看搭配效果</span>
                    </button>
                </div>
            </div>

            <!-- 场景3：食物选择 -->
            <div class="demo-box">
                <div class="scene-title">场景3：食堂用餐 🍱</div>
                <div class="status-tip">💡 选择食物查看对应图片</div>

                <div class="f1-area">
                    <div class="location-tag">📍 学校食堂</div>
                    <div class="story-text">
                        <p>午餐时间到了，食堂里飘来各种香味。</p>
                        <p>今天想吃什么呢？</p>
                    </div>

                    <div class="choice-item" onclick="selectFood(this, 'bento')">
                        → 日式便当
                    </div>
                    <div class="choice-item" onclick="selectFood(this, 'noodles')">
                        → 拉面
                    </div>
                    <div class="choice-item" onclick="selectFood(this, 'sandwich')">
                        → 三明治套餐
                    </div>
                    <div class="choice-item" onclick="selectFood(this, 'curry')">
                        → 咖喱饭
                    </div>

                    <!-- 食物插图 -->
                    <div class="illustration-area" id="foodIllustration">
                        <div class="illustration-icon" id="foodIcon">🍱</div>
                        <div class="illustration-caption" id="foodCaption">美味的食物</div>
                        <div class="illustration-desc" id="foodDesc">看起来很好吃！</div>
                    </div>
                </div>

                <div class="f2-area">
                    <button class="control-btn" onclick="proceedFood()">▶️ 继续</button>
                    <button class="control-btn" onclick="resetScene('food')">↩️ 重置</button>
                    <button class="control-btn zoom-btn" onclick="toggleFoodIllustration()">
                        🔍
                        <span class="has-illustration" id="foodIndicator" style="display: none;"></span>
                        <span class="zoom-tooltip" id="foodTooltip">查看食物</span>
                    </button>
                </div>
            </div>

            <!-- 场景4：隐藏彩蛋 -->
            <div class="demo-box">
                <div class="scene-title">场景4：神秘房间 🗝️</div>
                <div class="status-tip">💡 试试连续点击同一个选项3次...</div>

                <div class="f1-area">
                    <div class="special-effect">隐藏彩蛋</div>
                    <div class="location-tag">📍 ？？？</div>
                    <div class="story-text">
                        <p>你发现了一个神秘的房间。</p>
                        <p>房间里有三个按钮...</p>
                    </div>

                    <div class="choice-item" onclick="selectSecret(this, 'red')">
                        → 红色按钮
                    </div>
                    <div class="choice-item" onclick="selectSecret(this, 'blue')">
                        → 蓝色按钮
                    </div>
                    <div class="choice-item" onclick="selectSecret(this, 'green')">
                        → 绿色按钮
                    </div>

                    <!-- 彩蛋插图 -->
                    <div class="illustration-area" id="secretIllustration">
                        <div class="illustration-icon" id="secretIcon">🎁</div>
                        <div class="illustration-caption" id="secretCaption">???</div>
                        <div class="illustration-desc" id="secretDesc">继续探索...</div>
                    </div>
                </div>

                <div class="f2-area">
                    <button class="control-btn" onclick="proceedSecret()">▶️ 继续</button>
                    <button class="control-btn" onclick="resetSecret()">↩️ 重置</button>
                    <button class="control-btn zoom-btn" onclick="toggleSecretIllustration()">
                        🔍
                        <span class="has-illustration" id="secretIndicator" style="display: none;"></span>
                        <span class="zoom-tooltip">查看发现</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 图书馆场景数据
        const bookData = {
            novel: {
                icon: '📖',
                caption: '《星之彼端》- 轻小说',
                desc: '一本关于星际冒险的轻小说，封面是璀璨的星空。'
            },
            textbook: {
                icon: '📚',
                caption: '《高等数学》- 教科书',
                desc: '厚厚的教科书，看起来就让人头疼...'
            },
            magazine: {
                icon: '📰',
                caption: '《VOGUE》- 时尚杂志',
                desc: '最新一期的时尚杂志，封面是当红明星。'
            },
            manga: {
                icon: '📔',
                caption: '《进击的巨人》- 漫画',
                desc: '热血的战斗漫画，画风很棒！'
            }
        };

        // 服装数据
        const outfitData = {
            uniform: '👔',
            casual: '👕',
            formal: '🤵'
        };

        const accessoryData = {
            watch: '⌚',
            necklace: '💎',
            hat: '🧢'
        };

        // 食物数据
        const foodData = {
            bento: {
                icon: '🍱',
                caption: '精致的日式便当',
                desc: '有烤鱼、玉子烧、饭团，营养均衡。'
            },
            noodles: {
                icon: '🍜',
                caption: '热腾腾的拉面',
                desc: '豚骨汤底，配上叉烧和溏心蛋。'
            },
            sandwich: {
                icon: '🥪',
                caption: '三明治套餐',
                desc: '新鲜的蔬菜和火腿，配薯条和饮料。'
            },
            curry: {
                icon: '🍛',
                caption: '日式咖喱饭',
                desc: '浓郁的咖喱配上软糯的米饭。'
            }
        };

        // 当前选择
        let currentBook = null;
        let currentOutfit = null;
        let currentAccessories = new Set();
        let currentFood = null;
        let secretClickCount = {};

        // 图书选择
        function selectBook(element, type) {
            // 清除其他选中
            element.parentElement.querySelectorAll('.choice-item').forEach(item => {
                item.classList.remove('selected');
            });

            // 标记选中
            element.classList.add('selected');
            currentBook = type;

            // 更新插图内容
            const data = bookData[type];
            document.getElementById('bookIcon').textContent = data.icon;
            document.getElementById('bookCaption').textContent = data.caption;
            document.getElementById('bookDesc').textContent = data.desc;

            // 显示红点
            document.getElementById('bookIndicator').style.display = 'inline-block';

            // 更新提示
            document.getElementById('bookTooltip').textContent = `查看: ${data.caption.split('-')[0]}`;
        }

        // 切换图书插图
        function toggleBookIllustration() {
            if (!currentBook) {
                alert('请先选择一本书！');
                return;
            }

            const illus = document.getElementById('bookIllustration');
            illus.classList.toggle('show');

            // 自动滚动到插图
            if (illus.classList.contains('show')) {
                illus.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        // 服装选择
        function selectOutfit(element, type) {
            element.parentElement.querySelectorAll('.choice-item').forEach(item => {
                item.classList.remove('selected');
            });

            element.classList.add('selected');
            currentOutfit = type;
            updateOutfitDisplay();
        }

        // 配饰选择（多选）
        function toggleAccessory(element, type) {
            element.classList.toggle('selected');

            if (currentAccessories.has(type)) {
                currentAccessories.delete(type);
            } else {
                currentAccessories.add(type);
            }

            updateOutfitDisplay();
        }

        // 更新服装显示
        function updateOutfitDisplay() {
            if (!currentOutfit && currentAccessories.size === 0) {
                document.getElementById('outfitIndicator').style.display = 'none';
                return;
            }

            // 组合显示
            let icons = [];
            if (currentOutfit) {
                icons.push(outfitData[currentOutfit]);
            }
            currentAccessories.forEach(acc => {
                icons.push(accessoryData[acc]);
            });

            // 更新组合插图
            document.getElementById('outfitCombo').innerHTML = icons.map(icon =>
                `<div class="illustration-icon">${icon}</div>`
            ).join('');

            // 更新说明
            let caption = [];
            if (currentOutfit) {
                caption.push({
                    uniform: '校服',
                    casual: '休闲装',
                    formal: '正装'
                }[currentOutfit]);
            }
            if (currentAccessories.size > 0) {
                caption.push('+ ' + Array.from(currentAccessories).map(acc => ({
                    watch: '手表',
                    necklace: '项链',
                    hat: '帽子'
                }[acc])).join(' + '));
            }

            document.getElementById('outfitCaption').textContent = caption.join(' ');
            document.getElementById('outfitDesc').textContent = '你的搭配看起来很不错！';

            // 显示红点
            document.getElementById('outfitIndicator').style.display = 'inline-block';
        }

        // 切换服装插图
        function toggleOutfitIllustration() {
            if (!currentOutfit && currentAccessories.size === 0) {
                alert('请先选择服装或配饰！');
                return;
            }

            const illus = document.getElementById('outfitIllustration');
            illus.classList.toggle('show');

            if (illus.classList.contains('show')) {
                illus.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        // 食物选择
        function selectFood(element, type) {
            element.parentElement.querySelectorAll('.choice-item').forEach(item => {
                item.classList.remove('selected');
            });

            element.classList.add('selected');
            currentFood = type;

            // 更新插图
            const data = foodData[type];
            document.getElementById('foodIcon').textContent = data.icon;
            document.getElementById('foodCaption').textContent = data.caption;
            document.getElementById('foodDesc').textContent = data.desc;

            // 显示红点
            document.getElementById('foodIndicator').style.display = 'inline-block';
            document.getElementById('foodTooltip').textContent = `查看: ${data.caption}`;
        }

        // 切换食物插图
        function toggleFoodIllustration() {
            if (!currentFood) {
                alert('请先选择食物！');
                return;
            }

            const illus = document.getElementById('foodIllustration');
            illus.classList.toggle('show');

            if (illus.classList.contains('show')) {
                illus.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        // 神秘按钮
        function selectSecret(element, color) {
            // 记录点击次数
            if (!secretClickCount[color]) {
                secretClickCount[color] = 0;
            }
            secretClickCount[color]++;

            // 清除其他选中
            element.parentElement.querySelectorAll('.choice-item').forEach(item => {
                item.classList.remove('selected');
            });
            element.classList.add('selected');

            // 检查彩蛋
            if (secretClickCount[color] >= 3) {
                // 触发彩蛋！
                const illus = document.getElementById('secretIllustration');
                illus.classList.add('easter-egg');

                document.getElementById('secretIcon').textContent = '🌈';
                document.getElementById('secretCaption').textContent = '发现彩蛋！';
                document.getElementById('secretDesc').textContent = `你连续点击${color === 'red' ? '红色' : color === 'blue' ? '蓝色' : '绿色'}按钮3次，解锁了隐藏内容！`;

                document.getElementById('secretIndicator').style.display = 'inline-block';
                illus.classList.add('show');

                // 重置计数
                secretClickCount[color] = 0;
            } else {
                // 普通效果
                const colors = {
                    red: { icon: '🔴', caption: '红色按钮', desc: `已点击 ${secretClickCount[color]} 次...` },
                    blue: { icon: '🔵', caption: '蓝色按钮', desc: `已点击 ${secretClickCount[color]} 次...` },
                    green: { icon: '🟢', caption: '绿色按钮', desc: `已点击 ${secretClickCount[color]} 次...` }
                };

                const data = colors[color];
                document.getElementById('secretIcon').textContent = data.icon;
                document.getElementById('secretCaption').textContent = data.caption;
                document.getElementById('secretDesc').textContent = data.desc;

                document.getElementById('secretIndicator').style.display = 'inline-block';
            }
        }

        // 切换神秘插图
        function toggleSecretIllustration() {
            const illus = document.getElementById('secretIllustration');
            illus.classList.toggle('show');

            if (illus.classList.contains('show')) {
                illus.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        // 继续按钮处理
        function proceedBook() {
            if (!currentBook) {
                alert('请先选择一本书！');
                return;
            }
            alert(`你选择了：${bookData[currentBook].caption}\n场景将切换到下一幕...`);
        }

        function proceedOutfit() {
            if (!currentOutfit) {
                alert('请至少选择一件服装！');
                return;
            }
            alert('装扮完成！准备出发...');
        }

        function proceedFood() {
            if (!currentFood) {
                alert('请先选择食物！');
                return;
            }
            alert(`你点了：${foodData[currentFood].caption}\n开始用餐...`);
        }

        function proceedSecret() {
            alert('你按下了按钮，门缓缓打开...');
        }

        // 重置场景
        function resetScene(type) {
            location.reload(); // 简单重载
        }

        function resetSecret() {
            secretClickCount = {};
            const illus = document.getElementById('secretIllustration');
            illus.classList.remove('easter-egg');
            illus.classList.remove('show');
            document.getElementById('secretIndicator').style.display = 'none';

            document.querySelectorAll('.choice-item').forEach(item => {
                item.classList.remove('selected');
            });
        }
    </script>
</body>
</html>