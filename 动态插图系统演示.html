<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠ¨æ€æ’å›¾ç³»ç»Ÿ - æ ¹æ®é€‰é¡¹æ˜¾ç¤ºä¸åŒæ’å›¾</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, "PingFang SC", "Microsoft YaHei", sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            width: 100%;
        }

        h1 {
            color: white;
            text-align: center;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
        }

        .demo-box {
            background: #1a1a2e;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .scene-title {
            color: #f093fb;
            font-size: 16px;
            margin-bottom: 15px;
            font-weight: bold;
        }

        /* F1åŒºæ ·å¼ */
        .f1-area {
            background: #0f0f23;
            border-radius: 8px;
            padding: 15px;
            color: #e4e4e7;
            height: 350px;
            overflow-y: auto;
            position: relative;
        }

        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡ */
        .f1-area::-webkit-scrollbar {
            width: 6px;
        }

        .f1-area::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }

        .f1-area::-webkit-scrollbar-thumb {
            background: rgba(139, 92, 246, 0.4);
            border-radius: 3px;
        }

        .location-tag {
            color: #8b92f6;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .story-text {
            line-height: 1.6;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .story-text p {
            margin-bottom: 8px;
        }

        /* é€‰é¡¹æ ·å¼ */
        .choice-item {
            display: block;
            color: #a5b4fc;
            padding: 10px 15px;
            margin: 8px 0;
            background: rgba(139, 92, 246, 0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            position: relative;
            font-size: 14px;
        }

        .choice-item:hover {
            background: rgba(139, 92, 246, 0.15);
            transform: translateX(3px);
        }

        .choice-item.selected {
            background: rgba(139, 92, 246, 0.25);
            border-color: rgba(139, 92, 246, 0.5);
            transform: translateX(5px);
        }

        .choice-item.selected::after {
            content: 'âœ“';
            position: absolute;
            right: 15px;
            color: #8b92f6;
        }

        /* æ’å›¾æ˜¾ç¤ºåŒº */
        .illustration-area {
            margin-top: 30px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(240, 147, 251, 0.1));
            border-radius: 10px;
            text-align: center;
            display: none;
            animation: slideIn 0.3s ease;
            border: 1px dashed rgba(139, 92, 246, 0.3);
        }

        .illustration-area.show {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .illustration-icon {
            font-size: 64px;
            margin-bottom: 15px;
            filter: drop-shadow(0 4px 6px rgba(139, 92, 246, 0.3));
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .illustration-caption {
            color: #e4e4e7;
            font-size: 14px;
            font-style: italic;
            margin-bottom: 10px;
        }

        .illustration-desc {
            color: #94a3b8;
            font-size: 12px;
            line-height: 1.5;
        }

        /* F2åŒºæ§åˆ¶æ  */
        .f2-area {
            margin-top: 15px;
            padding: 12px;
            background: rgba(30, 30, 45, 0.95);
            border-radius: 8px;
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .control-btn {
            padding: 8px 16px;
            border-radius: 20px;
            background: rgba(139, 92, 246, 0.2);
            border: 1px solid rgba(139, 92, 246, 0.3);
            color: #e4e4e7;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .control-btn:hover {
            background: rgba(139, 92, 246, 0.3);
            transform: translateY(-1px);
        }

        .control-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        /* æ”¾å¤§é•œæŒ‰é’® */
        .zoom-btn {
            padding: 8px 12px;
            font-size: 16px;
            background: rgba(240, 147, 251, 0.2);
            border-color: rgba(240, 147, 251, 0.3);
            position: relative;
        }

        .zoom-btn:hover {
            background: rgba(240, 147, 251, 0.3);
        }

        .zoom-btn.active {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
        }

        /* åŠ¨æ€æç¤º */
        .zoom-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(30, 30, 45, 0.95);
            color: #f093fb;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 11px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            margin-bottom: 5px;
        }

        .zoom-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 5px solid transparent;
            border-top-color: rgba(30, 30, 45, 0.95);
        }

        .zoom-btn:hover .zoom-tooltip {
            opacity: 1;
        }

        /* æ’å›¾æŒ‡ç¤ºå™¨ */
        .has-illustration {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #f093fb;
            border-radius: 50%;
            margin-left: 5px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.6;
                transform: scale(1.3);
            }
        }

        /* çŠ¶æ€æç¤º */
        .status-tip {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid rgba(255, 193, 7, 0.3);
            color: #fbbf24;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            margin-bottom: 15px;
            text-align: center;
        }

        /* ç‰¹æ®Šæ•ˆæœ */
        .special-effect {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: bold;
            animation: sparkle 2s infinite;
        }

        @keyframes sparkle {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; transform: scale(0.95); }
        }

        /* ç»„åˆæ’å›¾ç‰¹æ®Šæ ·å¼ */
        .combo-illustration {
            display: flex;
            gap: 10px;
            justify-content: center;
            align-items: center;
        }

        .combo-illustration .illustration-icon {
            font-size: 48px;
        }

        /* éšè—å½©è›‹ */
        .easter-egg {
            background: linear-gradient(45deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3);
            background-size: 400% 400%;
            animation: gradient 3s ease infinite;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¨ åŠ¨æ€æ’å›¾ç³»ç»Ÿæ¼”ç¤º - é€‰ä»€ä¹ˆæ˜¾ç¤ºä»€ä¹ˆï¼</h1>

        <div class="demo-grid">
            <!-- åœºæ™¯1ï¼šå›¾ä¹¦é¦†é€‰ä¹¦ -->
            <div class="demo-box">
                <div class="scene-title">åœºæ™¯1ï¼šå›¾ä¹¦é¦†é€‰ä¹¦ ğŸ“š</div>
                <div class="status-tip">ğŸ’¡ é€‰æ‹©ä¸åŒçš„é€‰é¡¹ï¼Œæ”¾å¤§é•œä¼šæ˜¾ç¤ºå¯¹åº”çš„å›¾ç‰‡</div>

                <div class="f1-area">
                    <div class="location-tag">ğŸ“ å›¾ä¹¦é¦†Â·æ–‡å­¦åŒº</div>
                    <div class="story-text">
                        <p>å®‰é™çš„å›¾ä¹¦é¦†é‡Œï¼Œä¹¦æ¶ä¸Šæ‘†æ»¡äº†å„ç§ä¹¦ç±ã€‚</p>
                        <p>ä½ æƒ³æ‰¾æœ¬ä¹¦æ¥æ‰“å‘æ—¶é—´...</p>
                    </div>

                    <div class="choice-item" onclick="selectBook(this, 'novel')">
                        â†’ æ‰¾ä¸€æœ¬è½»å°è¯´
                    </div>
                    <div class="choice-item" onclick="selectBook(this, 'textbook')">
                        â†’ æŸ¥æ‰¾å­¦ä¹ èµ„æ–™
                    </div>
                    <div class="choice-item" onclick="selectBook(this, 'magazine')">
                        â†’ ç¿»ç¿»æ—¶å°šæ‚å¿—
                    </div>
                    <div class="choice-item" onclick="selectBook(this, 'manga')">
                        â†’ çœ‹çœ‹æ¼«ç”»ä¹¦
                    </div>

                    <!-- åŠ¨æ€æ’å›¾åŒº -->
                    <div class="illustration-area" id="bookIllustration">
                        <div class="illustration-icon" id="bookIcon">ğŸ“–</div>
                        <div class="illustration-caption" id="bookCaption">è½»å°è¯´</div>
                        <div class="illustration-desc" id="bookDesc">æè¿°</div>
                    </div>
                </div>

                <div class="f2-area">
                    <button class="control-btn" onclick="proceedBook()">â–¶ï¸ ç»§ç»­</button>
                    <button class="control-btn" onclick="resetScene('book')">â†©ï¸ é‡ç½®</button>
                    <button class="control-btn zoom-btn" onclick="toggleBookIllustration()">
                        ğŸ”
                        <span class="has-illustration" id="bookIndicator" style="display: none;"></span>
                        <span class="zoom-tooltip" id="bookTooltip">æŸ¥çœ‹å›¾ç‰‡</span>
                    </button>
                </div>
            </div>

            <!-- åœºæ™¯2ï¼šæ¢è£…ç³»ç»Ÿ -->
            <div class="demo-box">
                <div class="scene-title">åœºæ™¯2ï¼šæ›´è¡£å®¤æ¢è£… ğŸ‘”</div>
                <div class="status-tip">ğŸ’¡ é€‰æ‹©å¤šä¸ªè£…å¤‡ï¼ŒæŸ¥çœ‹ç»„åˆæ•ˆæœ</div>

                <div class="f1-area">
                    <div class="location-tag">ğŸ“ æ›´è¡£å®¤</div>
                    <div class="story-text">
                        <p>å‡†å¤‡å‚åŠ å­¦æ ¡æ´»åŠ¨ï¼Œä½ éœ€è¦é€‰æ‹©åˆé€‚çš„è£…æ‰®...</p>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <div style="color: #94a3b8; font-size: 12px; margin-bottom: 8px;">æœè£…ï¼ˆå•é€‰ï¼‰</div>
                        <div class="choice-item" onclick="selectOutfit(this, 'uniform')">
                            â†’ æ ¡æœ
                        </div>
                        <div class="choice-item" onclick="selectOutfit(this, 'casual')">
                            â†’ ä¼‘é—²è£…
                        </div>
                        <div class="choice-item" onclick="selectOutfit(this, 'formal')">
                            â†’ æ­£è£…
                        </div>
                    </div>

                    <div>
                        <div style="color: #94a3b8; font-size: 12px; margin-bottom: 8px;">é…é¥°ï¼ˆå¤šé€‰ï¼‰</div>
                        <div class="choice-item" onclick="toggleAccessory(this, 'watch')">
                            â†’ æ‰‹è¡¨
                        </div>
                        <div class="choice-item" onclick="toggleAccessory(this, 'necklace')">
                            â†’ é¡¹é“¾
                        </div>
                        <div class="choice-item" onclick="toggleAccessory(this, 'hat')">
                            â†’ å¸½å­
                        </div>
                    </div>

                    <!-- ç»„åˆæ’å›¾åŒº -->
                    <div class="illustration-area" id="outfitIllustration">
                        <div class="combo-illustration" id="outfitCombo">
                            <div class="illustration-icon">ğŸ‘”</div>
                        </div>
                        <div class="illustration-caption" id="outfitCaption">ä½ çš„è£…æ‰®</div>
                        <div class="illustration-desc" id="outfitDesc">é€‰æ‹©æœè£…å’Œé…é¥°æŸ¥çœ‹æ•ˆæœ</div>
                    </div>
                </div>

                <div class="f2-area">
                    <button class="control-btn" onclick="proceedOutfit()">â–¶ï¸ ç»§ç»­</button>
                    <button class="control-btn" onclick="resetScene('outfit')">â†©ï¸ é‡ç½®</button>
                    <button class="control-btn zoom-btn" onclick="toggleOutfitIllustration()">
                        ğŸ”
                        <span class="has-illustration" id="outfitIndicator" style="display: none;"></span>
                        <span class="zoom-tooltip">æŸ¥çœ‹æ­é…æ•ˆæœ</span>
                    </button>
                </div>
            </div>

            <!-- åœºæ™¯3ï¼šé£Ÿç‰©é€‰æ‹© -->
            <div class="demo-box">
                <div class="scene-title">åœºæ™¯3ï¼šé£Ÿå ‚ç”¨é¤ ğŸ±</div>
                <div class="status-tip">ğŸ’¡ é€‰æ‹©é£Ÿç‰©æŸ¥çœ‹å¯¹åº”å›¾ç‰‡</div>

                <div class="f1-area">
                    <div class="location-tag">ğŸ“ å­¦æ ¡é£Ÿå ‚</div>
                    <div class="story-text">
                        <p>åˆé¤æ—¶é—´åˆ°äº†ï¼Œé£Ÿå ‚é‡Œé£˜æ¥å„ç§é¦™å‘³ã€‚</p>
                        <p>ä»Šå¤©æƒ³åƒä»€ä¹ˆå‘¢ï¼Ÿ</p>
                    </div>

                    <div class="choice-item" onclick="selectFood(this, 'bento')">
                        â†’ æ—¥å¼ä¾¿å½“
                    </div>
                    <div class="choice-item" onclick="selectFood(this, 'noodles')">
                        â†’ æ‹‰é¢
                    </div>
                    <div class="choice-item" onclick="selectFood(this, 'sandwich')">
                        â†’ ä¸‰æ˜æ²»å¥—é¤
                    </div>
                    <div class="choice-item" onclick="selectFood(this, 'curry')">
                        â†’ å’–å–±é¥­
                    </div>

                    <!-- é£Ÿç‰©æ’å›¾ -->
                    <div class="illustration-area" id="foodIllustration">
                        <div class="illustration-icon" id="foodIcon">ğŸ±</div>
                        <div class="illustration-caption" id="foodCaption">ç¾å‘³çš„é£Ÿç‰©</div>
                        <div class="illustration-desc" id="foodDesc">çœ‹èµ·æ¥å¾ˆå¥½åƒï¼</div>
                    </div>
                </div>

                <div class="f2-area">
                    <button class="control-btn" onclick="proceedFood()">â–¶ï¸ ç»§ç»­</button>
                    <button class="control-btn" onclick="resetScene('food')">â†©ï¸ é‡ç½®</button>
                    <button class="control-btn zoom-btn" onclick="toggleFoodIllustration()">
                        ğŸ”
                        <span class="has-illustration" id="foodIndicator" style="display: none;"></span>
                        <span class="zoom-tooltip" id="foodTooltip">æŸ¥çœ‹é£Ÿç‰©</span>
                    </button>
                </div>
            </div>

            <!-- åœºæ™¯4ï¼šéšè—å½©è›‹ -->
            <div class="demo-box">
                <div class="scene-title">åœºæ™¯4ï¼šç¥ç§˜æˆ¿é—´ ğŸ—ï¸</div>
                <div class="status-tip">ğŸ’¡ è¯•è¯•è¿ç»­ç‚¹å‡»åŒä¸€ä¸ªé€‰é¡¹3æ¬¡...</div>

                <div class="f1-area">
                    <div class="special-effect">éšè—å½©è›‹</div>
                    <div class="location-tag">ğŸ“ ï¼Ÿï¼Ÿï¼Ÿ</div>
                    <div class="story-text">
                        <p>ä½ å‘ç°äº†ä¸€ä¸ªç¥ç§˜çš„æˆ¿é—´ã€‚</p>
                        <p>æˆ¿é—´é‡Œæœ‰ä¸‰ä¸ªæŒ‰é’®...</p>
                    </div>

                    <div class="choice-item" onclick="selectSecret(this, 'red')">
                        â†’ çº¢è‰²æŒ‰é’®
                    </div>
                    <div class="choice-item" onclick="selectSecret(this, 'blue')">
                        â†’ è“è‰²æŒ‰é’®
                    </div>
                    <div class="choice-item" onclick="selectSecret(this, 'green')">
                        â†’ ç»¿è‰²æŒ‰é’®
                    </div>

                    <!-- å½©è›‹æ’å›¾ -->
                    <div class="illustration-area" id="secretIllustration">
                        <div class="illustration-icon" id="secretIcon">ğŸ</div>
                        <div class="illustration-caption" id="secretCaption">???</div>
                        <div class="illustration-desc" id="secretDesc">ç»§ç»­æ¢ç´¢...</div>
                    </div>
                </div>

                <div class="f2-area">
                    <button class="control-btn" onclick="proceedSecret()">â–¶ï¸ ç»§ç»­</button>
                    <button class="control-btn" onclick="resetSecret()">â†©ï¸ é‡ç½®</button>
                    <button class="control-btn zoom-btn" onclick="toggleSecretIllustration()">
                        ğŸ”
                        <span class="has-illustration" id="secretIndicator" style="display: none;"></span>
                        <span class="zoom-tooltip">æŸ¥çœ‹å‘ç°</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å›¾ä¹¦é¦†åœºæ™¯æ•°æ®
        const bookData = {
            novel: {
                icon: 'ğŸ“–',
                caption: 'ã€Šæ˜Ÿä¹‹å½¼ç«¯ã€‹- è½»å°è¯´',
                desc: 'ä¸€æœ¬å…³äºæ˜Ÿé™…å†’é™©çš„è½»å°è¯´ï¼Œå°é¢æ˜¯ç’€ç’¨çš„æ˜Ÿç©ºã€‚'
            },
            textbook: {
                icon: 'ğŸ“š',
                caption: 'ã€Šé«˜ç­‰æ•°å­¦ã€‹- æ•™ç§‘ä¹¦',
                desc: 'åšåšçš„æ•™ç§‘ä¹¦ï¼Œçœ‹èµ·æ¥å°±è®©äººå¤´ç–¼...'
            },
            magazine: {
                icon: 'ğŸ“°',
                caption: 'ã€ŠVOGUEã€‹- æ—¶å°šæ‚å¿—',
                desc: 'æœ€æ–°ä¸€æœŸçš„æ—¶å°šæ‚å¿—ï¼Œå°é¢æ˜¯å½“çº¢æ˜æ˜Ÿã€‚'
            },
            manga: {
                icon: 'ğŸ“”',
                caption: 'ã€Šè¿›å‡»çš„å·¨äººã€‹- æ¼«ç”»',
                desc: 'çƒ­è¡€çš„æˆ˜æ–—æ¼«ç”»ï¼Œç”»é£å¾ˆæ£’ï¼'
            }
        };

        // æœè£…æ•°æ®
        const outfitData = {
            uniform: 'ğŸ‘”',
            casual: 'ğŸ‘•',
            formal: 'ğŸ¤µ'
        };

        const accessoryData = {
            watch: 'âŒš',
            necklace: 'ğŸ’',
            hat: 'ğŸ§¢'
        };

        // é£Ÿç‰©æ•°æ®
        const foodData = {
            bento: {
                icon: 'ğŸ±',
                caption: 'ç²¾è‡´çš„æ—¥å¼ä¾¿å½“',
                desc: 'æœ‰çƒ¤é±¼ã€ç‰å­çƒ§ã€é¥­å›¢ï¼Œè¥å…»å‡è¡¡ã€‚'
            },
            noodles: {
                icon: 'ğŸœ',
                caption: 'çƒ­è…¾è…¾çš„æ‹‰é¢',
                desc: 'è±šéª¨æ±¤åº•ï¼Œé…ä¸Šå‰çƒ§å’Œæºå¿ƒè›‹ã€‚'
            },
            sandwich: {
                icon: 'ğŸ¥ª',
                caption: 'ä¸‰æ˜æ²»å¥—é¤',
                desc: 'æ–°é²œçš„è”¬èœå’Œç«è…¿ï¼Œé…è–¯æ¡å’Œé¥®æ–™ã€‚'
            },
            curry: {
                icon: 'ğŸ›',
                caption: 'æ—¥å¼å’–å–±é¥­',
                desc: 'æµ“éƒçš„å’–å–±é…ä¸Šè½¯ç³¯çš„ç±³é¥­ã€‚'
            }
        };

        // å½“å‰é€‰æ‹©
        let currentBook = null;
        let currentOutfit = null;
        let currentAccessories = new Set();
        let currentFood = null;
        let secretClickCount = {};

        // å›¾ä¹¦é€‰æ‹©
        function selectBook(element, type) {
            // æ¸…é™¤å…¶ä»–é€‰ä¸­
            element.parentElement.querySelectorAll('.choice-item').forEach(item => {
                item.classList.remove('selected');
            });

            // æ ‡è®°é€‰ä¸­
            element.classList.add('selected');
            currentBook = type;

            // æ›´æ–°æ’å›¾å†…å®¹
            const data = bookData[type];
            document.getElementById('bookIcon').textContent = data.icon;
            document.getElementById('bookCaption').textContent = data.caption;
            document.getElementById('bookDesc').textContent = data.desc;

            // æ˜¾ç¤ºçº¢ç‚¹
            document.getElementById('bookIndicator').style.display = 'inline-block';

            // æ›´æ–°æç¤º
            document.getElementById('bookTooltip').textContent = `æŸ¥çœ‹: ${data.caption.split('-')[0]}`;
        }

        // åˆ‡æ¢å›¾ä¹¦æ’å›¾
        function toggleBookIllustration() {
            if (!currentBook) {
                alert('è¯·å…ˆé€‰æ‹©ä¸€æœ¬ä¹¦ï¼');
                return;
            }

            const illus = document.getElementById('bookIllustration');
            illus.classList.toggle('show');

            // è‡ªåŠ¨æ»šåŠ¨åˆ°æ’å›¾
            if (illus.classList.contains('show')) {
                illus.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        // æœè£…é€‰æ‹©
        function selectOutfit(element, type) {
            element.parentElement.querySelectorAll('.choice-item').forEach(item => {
                item.classList.remove('selected');
            });

            element.classList.add('selected');
            currentOutfit = type;
            updateOutfitDisplay();
        }

        // é…é¥°é€‰æ‹©ï¼ˆå¤šé€‰ï¼‰
        function toggleAccessory(element, type) {
            element.classList.toggle('selected');

            if (currentAccessories.has(type)) {
                currentAccessories.delete(type);
            } else {
                currentAccessories.add(type);
            }

            updateOutfitDisplay();
        }

        // æ›´æ–°æœè£…æ˜¾ç¤º
        function updateOutfitDisplay() {
            if (!currentOutfit && currentAccessories.size === 0) {
                document.getElementById('outfitIndicator').style.display = 'none';
                return;
            }

            // ç»„åˆæ˜¾ç¤º
            let icons = [];
            if (currentOutfit) {
                icons.push(outfitData[currentOutfit]);
            }
            currentAccessories.forEach(acc => {
                icons.push(accessoryData[acc]);
            });

            // æ›´æ–°ç»„åˆæ’å›¾
            document.getElementById('outfitCombo').innerHTML = icons.map(icon =>
                `<div class="illustration-icon">${icon}</div>`
            ).join('');

            // æ›´æ–°è¯´æ˜
            let caption = [];
            if (currentOutfit) {
                caption.push({
                    uniform: 'æ ¡æœ',
                    casual: 'ä¼‘é—²è£…',
                    formal: 'æ­£è£…'
                }[currentOutfit]);
            }
            if (currentAccessories.size > 0) {
                caption.push('+ ' + Array.from(currentAccessories).map(acc => ({
                    watch: 'æ‰‹è¡¨',
                    necklace: 'é¡¹é“¾',
                    hat: 'å¸½å­'
                }[acc])).join(' + '));
            }

            document.getElementById('outfitCaption').textContent = caption.join(' ');
            document.getElementById('outfitDesc').textContent = 'ä½ çš„æ­é…çœ‹èµ·æ¥å¾ˆä¸é”™ï¼';

            // æ˜¾ç¤ºçº¢ç‚¹
            document.getElementById('outfitIndicator').style.display = 'inline-block';
        }

        // åˆ‡æ¢æœè£…æ’å›¾
        function toggleOutfitIllustration() {
            if (!currentOutfit && currentAccessories.size === 0) {
                alert('è¯·å…ˆé€‰æ‹©æœè£…æˆ–é…é¥°ï¼');
                return;
            }

            const illus = document.getElementById('outfitIllustration');
            illus.classList.toggle('show');

            if (illus.classList.contains('show')) {
                illus.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        // é£Ÿç‰©é€‰æ‹©
        function selectFood(element, type) {
            element.parentElement.querySelectorAll('.choice-item').forEach(item => {
                item.classList.remove('selected');
            });

            element.classList.add('selected');
            currentFood = type;

            // æ›´æ–°æ’å›¾
            const data = foodData[type];
            document.getElementById('foodIcon').textContent = data.icon;
            document.getElementById('foodCaption').textContent = data.caption;
            document.getElementById('foodDesc').textContent = data.desc;

            // æ˜¾ç¤ºçº¢ç‚¹
            document.getElementById('foodIndicator').style.display = 'inline-block';
            document.getElementById('foodTooltip').textContent = `æŸ¥çœ‹: ${data.caption}`;
        }

        // åˆ‡æ¢é£Ÿç‰©æ’å›¾
        function toggleFoodIllustration() {
            if (!currentFood) {
                alert('è¯·å…ˆé€‰æ‹©é£Ÿç‰©ï¼');
                return;
            }

            const illus = document.getElementById('foodIllustration');
            illus.classList.toggle('show');

            if (illus.classList.contains('show')) {
                illus.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        // ç¥ç§˜æŒ‰é’®
        function selectSecret(element, color) {
            // è®°å½•ç‚¹å‡»æ¬¡æ•°
            if (!secretClickCount[color]) {
                secretClickCount[color] = 0;
            }
            secretClickCount[color]++;

            // æ¸…é™¤å…¶ä»–é€‰ä¸­
            element.parentElement.querySelectorAll('.choice-item').forEach(item => {
                item.classList.remove('selected');
            });
            element.classList.add('selected');

            // æ£€æŸ¥å½©è›‹
            if (secretClickCount[color] >= 3) {
                // è§¦å‘å½©è›‹ï¼
                const illus = document.getElementById('secretIllustration');
                illus.classList.add('easter-egg');

                document.getElementById('secretIcon').textContent = 'ğŸŒˆ';
                document.getElementById('secretCaption').textContent = 'å‘ç°å½©è›‹ï¼';
                document.getElementById('secretDesc').textContent = `ä½ è¿ç»­ç‚¹å‡»${color === 'red' ? 'çº¢è‰²' : color === 'blue' ? 'è“è‰²' : 'ç»¿è‰²'}æŒ‰é’®3æ¬¡ï¼Œè§£é”äº†éšè—å†…å®¹ï¼`;

                document.getElementById('secretIndicator').style.display = 'inline-block';
                illus.classList.add('show');

                // é‡ç½®è®¡æ•°
                secretClickCount[color] = 0;
            } else {
                // æ™®é€šæ•ˆæœ
                const colors = {
                    red: { icon: 'ğŸ”´', caption: 'çº¢è‰²æŒ‰é’®', desc: `å·²ç‚¹å‡» ${secretClickCount[color]} æ¬¡...` },
                    blue: { icon: 'ğŸ”µ', caption: 'è“è‰²æŒ‰é’®', desc: `å·²ç‚¹å‡» ${secretClickCount[color]} æ¬¡...` },
                    green: { icon: 'ğŸŸ¢', caption: 'ç»¿è‰²æŒ‰é’®', desc: `å·²ç‚¹å‡» ${secretClickCount[color]} æ¬¡...` }
                };

                const data = colors[color];
                document.getElementById('secretIcon').textContent = data.icon;
                document.getElementById('secretCaption').textContent = data.caption;
                document.getElementById('secretDesc').textContent = data.desc;

                document.getElementById('secretIndicator').style.display = 'inline-block';
            }
        }

        // åˆ‡æ¢ç¥ç§˜æ’å›¾
        function toggleSecretIllustration() {
            const illus = document.getElementById('secretIllustration');
            illus.classList.toggle('show');

            if (illus.classList.contains('show')) {
                illus.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        // ç»§ç»­æŒ‰é’®å¤„ç†
        function proceedBook() {
            if (!currentBook) {
                alert('è¯·å…ˆé€‰æ‹©ä¸€æœ¬ä¹¦ï¼');
                return;
            }
            alert(`ä½ é€‰æ‹©äº†ï¼š${bookData[currentBook].caption}\nåœºæ™¯å°†åˆ‡æ¢åˆ°ä¸‹ä¸€å¹•...`);
        }

        function proceedOutfit() {
            if (!currentOutfit) {
                alert('è¯·è‡³å°‘é€‰æ‹©ä¸€ä»¶æœè£…ï¼');
                return;
            }
            alert('è£…æ‰®å®Œæˆï¼å‡†å¤‡å‡ºå‘...');
        }

        function proceedFood() {
            if (!currentFood) {
                alert('è¯·å…ˆé€‰æ‹©é£Ÿç‰©ï¼');
                return;
            }
            alert(`ä½ ç‚¹äº†ï¼š${foodData[currentFood].caption}\nå¼€å§‹ç”¨é¤...`);
        }

        function proceedSecret() {
            alert('ä½ æŒ‰ä¸‹äº†æŒ‰é’®ï¼Œé—¨ç¼“ç¼“æ‰“å¼€...');
        }

        // é‡ç½®åœºæ™¯
        function resetScene(type) {
            location.reload(); // ç®€å•é‡è½½
        }

        function resetSecret() {
            secretClickCount = {};
            const illus = document.getElementById('secretIllustration');
            illus.classList.remove('easter-egg');
            illus.classList.remove('show');
            document.getElementById('secretIndicator').style.display = 'none';

            document.querySelectorAll('.choice-item').forEach(item => {
                item.classList.remove('selected');
            });
        }
    </script>
</body>
</html>