<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">

    <!-- PWAÈÖçÁΩÆ -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Reality">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#1a1a2e">
    <meta name="format-detection" content="telephone=no">

    <!-- PWA manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%238b92f6'/%3E%3Cstop offset='100%25' style='stop-color:%23f093fb'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='180' height='180' fill='url(%23g)'/%3E%3Ctext x='90' y='105' text-anchor='middle' fill='white' font-size='75' font-family='Arial'%3E‚ú®%3C/text%3E%3C/svg%3E">

    <title>Reality - Ê∏∏Êàè‰∏≠</title>
    <!-- PWAÈÄÇÈÖçÊ†∑Âºè -->
    <link rel="stylesheet" href="css/app.css">
    <!-- Ê∏∏Êàè‰∏ªÁïåÈù¢Ê†∑Âºè -->
    <link rel="stylesheet" href="css/game-main.css">
</head>
<body>
    <div class="game-container pwa-safe-container">
        <!-- ‰∏äÂçäÈÉ®ÂàÜ -->
        <div class="upper-section">
            <div class="upper-main">
                <!-- AÂå∫ - Á´ãÁªò -->
                <div class="area-a" id="characterSprite">
                    <div class="character-sprite-container">
                        <div class="sprite-placeholder">üëß</div>
                        <div class="sprite-name" id="characterName">ËßíËâ≤</div>
                    </div>
                </div>

                <!-- Âè≥‰æßÂå∫Âüü -->
                <div class="right-section">
                    <!-- BÂå∫ - ‰ΩçÁΩÆÊó∂Èó¥ -->
                    <div class="area-b">
                        <div class="location-info">
                            <span class="location-icon">üìç</span>
                            <span id="currentLocation">Â≠¶Ê†°¬∑ÊïôÂÆ§</span>
                        </div>
                        <div class="time-info">
                            <span class="time-icon">üïê</span>
                            <span id="currentTime">ÊòüÊúü‰∏Ä 08:30</span>
                        </div>
                    </div>

                    <!-- CÂå∫ - ÊôØËâ≤ -->
                    <div class="area-c" id="scenePreview">
                        <div class="scene-content">
                            <span class="scene-emoji">üè´</span>
                            <span class="scene-text">ÊïôÂÆ§Âú∫ÊôØ</span>
                        </div>
                    </div>

                    <!-- DÂå∫ - ÂäüËÉΩÈù¢Êùø -->
                    <div class="area-d">
                        <div class="function-tabs">
                            <div class="tab-btn active" data-tab="status" onclick="switchTab('status')" title="Áä∂ÊÄÅ">üìä</div>
                            <div class="tab-btn" data-tab="inventory" onclick="switchTab('inventory')" title="ËÉåÂåÖ">üéí</div>
                            <div class="tab-btn" data-tab="map" onclick="switchTab('map')" title="Âú∞Âõæ">üó∫Ô∏è</div>
                            <div class="tab-btn" data-tab="skills" onclick="switchTab('skills')" title="Â±ûÊÄß">‚≠ê</div>
                            <div class="tab-btn" data-tab="social" onclick="switchTab('social')" title="Á§æ‰∫§">üë•</div>
                            <div class="tab-btn" data-tab="journal" onclick="switchTab('journal')" title="Êó•Âøó">üìñ</div>
                            <div class="tab-btn" data-tab="settings" onclick="switchTab('settings')" title="ËÆæÁΩÆ">‚öôÔ∏è</div>
                        </div>
                        <div class="function-content" id="functionContent">
                            <!-- ÈªòËÆ§ÊòæÁ§∫Áä∂ÊÄÅÂÜÖÂÆπ -->
                            <div class="tab-content" id="statusContent">
                                <div class="stat-item">
                                    <span class="stat-label">‰ΩìÂäõ</span>
                                    <div class="stat-bar">
                                        <div class="stat-fill" id="healthBar" style="width: 100%;"></div>
                                    </div>
                                    <span class="stat-value" id="healthValue">100</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">ÂøÉÊÉÖ</span>
                                    <div class="stat-bar">
                                        <div class="stat-fill mood" id="moodBar" style="width: 50%;"></div>
                                    </div>
                                    <span class="stat-value" id="moodValue">50</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">ÈáëÈí±</span>
                                    <div class="stat-bar">
                                        <div class="stat-fill money" id="moneyBar" style="width: 100%;"></div>
                                    </div>
                                    <span class="stat-value" id="moneyValue">100</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Á≤æÂäõ</span>
                                    <div class="stat-bar">
                                        <div class="stat-fill energy" id="energyBar" style="width: 80%;"></div>
                                    </div>
                                    <span class="stat-value" id="energyValue">80</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- EÂå∫ - ÊèêÈÜí -->
            <div class="area-e">
                <span class="notice-text" id="noticeText">üí° ÊèêÈÜíÔºöÁ¨¨‰∏ÄËäÇËØæÂç≥Â∞ÜÂºÄÂßãÔºåËØ∑Â∞ΩÂø´ÂâçÂæÄÊïôÂÆ§...</span>
            </div>
        </div>

        <!-- ‰∏ãÂçäÈÉ®ÂàÜ - FÂå∫ -->
        <div class="lower-section">
            <!-- AIÊ®°ÂºèÊåáÁ§∫Âô® -->
            <div class="ai-mode-indicator" id="aiModeIndicator">AIÂØπËØùÊ®°Âºè</div>

            <!-- F1Âå∫ - ÂâßÊÉÖÊñáÊú¨ÂíåÈÄâÈ°πÊ∑∑Âêà -->
            <div class="story-area" id="storyArea">
                <!-- ÂâßÊÉÖÂÜÖÂÆπÂ∞ÜÂä®ÊÄÅÂä†ËΩΩ -->
                <div class="story-text">
                    <p>Ê∏∏ÊàèÊ≠£Âú®Âä†ËΩΩ‰∏≠...</p>
                </div>
            </div>

            <!-- F2Âå∫ - AIËæìÂÖ•Âå∫Âüü -->
            <div class="ai-input-area" id="aiInputArea">
                <div class="ai-input-wrapper">
                    <input type="text" class="ai-input" id="aiInput" placeholder="ËæìÂÖ•‰Ω†ÊÉ≥ËØ¥ÁöÑËØù..." />
                    <button class="ai-send-btn" id="aiSendBtn" onclick="sendAIMessage()">
                        ‚û§
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Dexie.js for IndexedDB -->
    <script src="https://unpkg.com/dexie@3.2.4/dist/dexie.min.js"></script>
    <!-- Êï∞ÊçÆÂ∫ìÂíåAPIÁÆ°ÁêÜ -->
    <script src="js/core/database.js"></script>
    <script src="js/api/api-state.js"></script>
    <!-- Âä†ËΩΩÂä®ÁîªÁ≥ªÁªü -->
    <script src="js/utils/animations.js"></script>
    <!-- Âä†ËΩΩÂú∫ÊôØÁÆ°ÁêÜÁ≥ªÁªü -->
    <script src="js/core/scene-manager.js"></script>
    <!-- Âä†ËΩΩF2Âå∫ÁÆ°ÁêÜÂô® -->
    <script src="js/core/f2-manager.js"></script>
    <!-- Âä†ËΩΩÊèíÂõæÁ≥ªÁªü -->
    <script src="js/data/scene-illustrations.js"></script>
    <script src="js/core/illustration-manager.js"></script>
    <!-- Âä†ËΩΩÊ∏∏ÊàèËÑöÊú¨ -->
    <script src="js/pages/game-main.js"></script>
    <!-- Âä†ËΩΩÂéüÊúâÁöÑÊ∏∏ÊàèÈÄªËæë -->
    <script src="js/core/game.js"></script>
    <!-- Âä†ËΩΩAIÈÖçÁΩÆ -->
    <script src="js/ai/ai-config.js"></script>
    <script src="js/ai/ai-npc-system.js"></script>
    <!-- Âä†ËΩΩÈ´òÁ∫ßÊ∏∏ÊàèÁ≥ªÁªüÔºàÂ¶ÇÊûúÈúÄË¶ÅÔºâ -->
    <!-- <script src="js/core/advanced-game.js"></script> -->
    <script>
        // ÂàùÂßãÂåñÂä®ÁîªÊïàÊûú
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof AnimationEffects !== 'undefined') {
                AnimationEffects.init();
                AnimationEffects.createGameAnimations();
            }

            // Âä†ËΩΩÂàùÂßãÂú∫ÊôØ
            if (window.sceneManager) {
                // ÊµãËØïÂú∫ÊôØÊï∞ÊçÆ
                const testScene = {
                    id: 'start',
                    location: 'ÂÆøËàç',
                    text: [
                        'Ê∏ÖÊô®ÁöÑÈò≥ÂÖâÈÄèËøáÁ™óÂ∏òÊ¥íËøõÊàøÈó¥„ÄÇ',
                        'Êñ∞ÁöÑ‰∏ÄÂ§©ÂºÄÂßã‰∫ÜÔºå‰Ω†ÊâìÁÆóÂÅö‰ªÄ‰πàÔºü'
                    ],
                    choices: [
                        { text: '‚Üí Ëµ∑Â∫äÊ¥óÊº±', target: 'bathroom' },
                        { text: '‚Üí ÂÜçÁù°‰∏Ä‰ºö', target: 'sleep' },
                        { text: '‚Üí Êü•ÁúãÊâãÊú∫', target: 'phone' }
                    ]
                };

                // Âä†ËΩΩÂú∫ÊôØ
                setTimeout(() => {
                    sceneManager.loadScene(testScene);
                }, 500);
            }
        });
    </script>
</body>
</html>